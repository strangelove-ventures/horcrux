project_name: horcrux

env:
  # Require use of Go modules.
  - GO111MODULE=on

builds:
  - id: "horcrux"
    main: ./cmd/horcrux/main.go
    flags:
      - -trimpath
    ldflags:
      - -s
      - -w
      - -X "github.com/strangelove-ventures/horcrux/cmd/horcrux/cmd.Version={{ .Version }}"
      - -X "github.com/strangelove-ventures/horcrux/cmd/horcrux/cmd.Commit={{ .Commit }}"
    goos:
      - darwin
      - linux
    goarch:
      - amd64
      - arm64
    env:
      - CGO_ENABLED=0  

checksum:
  name_template: SHA256SUMS-{{.Version}}.txt
  algorithm: sha256

release:
  name_template: "Release {{.Version}}"

archives:
  - files:
    - LICENSE.md
    - README.md
